# Diagrama de Arquitetura do Monorepo

## ğŸ—ï¸ VisÃ£o Geral da Estrutura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MONOREPO                            â”‚
â”‚                    (Turborepo + pnpm)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     APPS      â”‚                           â”‚   PACKAGES   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                           â”‚
        â”œâ”€ web/                                     â”œâ”€ @repo/ui
        â”‚  â”œâ”€ Next.js 15.5.6                       â”‚  â”œâ”€ Radix UI
        â”‚  â”œâ”€ React 19.2.0                         â”‚  â”œâ”€ Shadcn/ui
        â”‚  â”œâ”€ i18n (next-intl)                     â”‚  â”œâ”€ Lucide Icons
        â”‚  â”œâ”€ Redux Toolkit                        â”‚  â””â”€ Components
        â”‚  â”œâ”€ TanStack Query                       â”‚
        â”‚  â”œâ”€ Tiptap Editor                        â”œâ”€ @repo/api
        â”‚  â””â”€ Socket.io                            â”‚  â”œâ”€ Types
        â”‚                                           â”‚  â””â”€ Generators
        â””â”€ docs/                                    â”‚
           â””â”€ (Em desenvolvimento)                  â”œâ”€ @repo/fonts
                                                    â”‚  â””â”€ Geist
                                                    â”‚
                                                    â”œâ”€ @repo/tailwind-config
                                                    â”‚  â””â”€ Theme
                                                    â”‚
                                                    â”œâ”€ @repo/eslint-config
                                                    â”‚  â””â”€ Rules
                                                    â”‚
                                                    â””â”€ @repo/typescript-config
                                                       â””â”€ Configs
```

## ğŸ“¦ Fluxo de DependÃªncias

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  apps/web   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                     â”‚
       â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  @repo/ui    â”‚      â”‚ @repo/fonts  â”‚
â”‚              â”‚      â”‚              â”‚
â”‚ â€¢ Button     â”‚      â”‚ â€¢ GeistSans  â”‚
â”‚ â€¢ Input      â”‚      â”‚ â€¢ GeistMono  â”‚
â”‚ â€¢ Dialog     â”‚      â”‚              â”‚
â”‚ â€¢ ...        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                      â”‚
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React 19   â”‚        â”‚  Radix UI   â”‚
â”‚  React DOM  â”‚        â”‚  Latest     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Pipeline de Build

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TURBO BUILD                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
        â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  @repo/api   â”‚  â”‚  @repo/ui    â”‚  â”‚ @repo/fonts  â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚  (no build)  â”‚  â”‚  TypeScript  â”‚  â”‚  TypeScript  â”‚
â”‚  Types only  â”‚  â”‚  check only  â”‚  â”‚  check only  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   apps/web   â”‚
                  â”‚              â”‚
                  â”‚  Next.js     â”‚
                  â”‚  Build       â”‚
                  â”‚              â”‚
                  â”‚  Output:     â”‚
                  â”‚  .next/      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Fluxo de Desenvolvimento

```
Developer
    â”‚
    â”œâ”€ pnpm dev
    â”‚     â”‚
    â”‚     â”œâ”€ Turbo detecta mudanÃ§as
    â”‚     â”‚
    â”‚     â”œâ”€ Hot reload apps/web
    â”‚     â”‚
    â”‚     â””â”€ Type check em background
    â”‚
    â”œâ”€ Faz mudanÃ§as
    â”‚     â”‚
    â”‚     â”œâ”€ Em @repo/ui â†’ Reflete em web
    â”‚     â”‚
    â”‚     â””â”€ Em apps/web â†’ Reload instantÃ¢neo
    â”‚
    â””â”€ pnpm validate
          â”‚
          â”œâ”€ check-versions âœ…
          â”œâ”€ check-types âœ…
          â””â”€ lint âœ…
```

## ğŸ—‚ï¸ OrganizaÃ§Ã£o de State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         apps/web State Layers           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server State   â”‚  â† TanStack Query
â”‚  (API data)     â”‚    â€¢ Cache automÃ¡tico
â”‚                 â”‚    â€¢ Revalidation
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â€¢ Optimistic updates

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Global State   â”‚  â† Redux Toolkit
â”‚  (App-wide)     â”‚    â€¢ User session
â”‚                 â”‚    â€¢ Permissions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â€¢ Global UI state

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Local State    â”‚  â† Zustand
â”‚  (Feature)      â”‚    â€¢ Theme
â”‚                 â”‚    â€¢ UI preferences
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â€¢ Feature toggles

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component      â”‚  â† useState
â”‚  State          â”‚    â€¢ Form inputs
â”‚  (UI only)      â”‚    â€¢ Modal states
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â€¢ Toggles
```

## ğŸ¨ UI Component Hierarchy

```
@repo/ui
    â”‚
    â”œâ”€ Primitives (Radix UI)
    â”‚   â””â”€ Headless, accessible
    â”‚
    â”œâ”€ Base Components (Shadcn)
    â”‚   â””â”€ Styled Radix wrappers
    â”‚
    â”œâ”€ Composed Components
    â”‚   â””â”€ Multi-component patterns
    â”‚
    â””â”€ Exported via index.ts
          â”‚
          â””â”€ Used in apps/web
                â”‚
                â””â”€ App-specific compositions
```

## ğŸ” Type Safety Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         TypeScript 5.9.3                 â”‚
â”‚         (Strict Mode)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚             â”‚
    â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Zod   â”‚  â”‚ Prisma â”‚  â”‚ Manual â”‚
â”‚ Schema â”‚  â”‚ Types  â”‚  â”‚ Types  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚             â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   @repo/api     â”‚
         â”‚   (Central)     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   apps/web      â”‚
         â”‚   (Consumes)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Responsive Design Flow

```
Design Tokens (Tailwind Config)
         â”‚
         â”œâ”€ Breakpoints
         â”‚   â”œâ”€ sm: 640px
         â”‚   â”œâ”€ md: 768px
         â”‚   â”œâ”€ lg: 1024px
         â”‚   â””â”€ xl: 1280px
         â”‚
         â”œâ”€ Colors (Theme)
         â”‚   â”œâ”€ Light mode
         â”‚   â””â”€ Dark mode
         â”‚
         â””â”€ Typography
             â””â”€ Geist fonts
                   â”‚
                   â–¼
            @repo/ui Components
                   â”‚
                   â”œâ”€ Mobile-first
                   â”œâ”€ Accessible (ARIA)
                   â””â”€ Theme-aware
                   â”‚
                   â–¼
            apps/web Pages
                   â”‚
                   â””â”€ Responsive layouts
```

## ğŸŒ i18n Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      apps/web/locales/             â”‚
â”‚                                    â”‚
â”‚  â”œâ”€ en-US/                         â”‚
â”‚  â”‚   â”œâ”€ common.json                â”‚
â”‚  â”‚   â”œâ”€ page/*.json                â”‚
â”‚  â”‚   â””â”€ ...                        â”‚
â”‚  â”‚                                 â”‚
â”‚  â””â”€ pt-BR/                         â”‚
â”‚      â”œâ”€ common.json                â”‚
â”‚      â”œâ”€ page/*.json                â”‚
â”‚      â””â”€ ...                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    next-intl Middleware
              â”‚
              â”œâ”€ Locale detection
              â”œâ”€ Route rewriting
              â””â”€ Message loading
              â”‚
              â–¼
    App Router [locale]
              â”‚
              â””â”€ Translated pages
```

## ğŸ”„ CI/CD Flow (Recomendado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git Push   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ Install (pnpm install --frozen-lockfile)
       â”‚
       â”œâ”€ Validate
       â”‚   â”œâ”€ pnpm check-versions âœ…
       â”‚   â”œâ”€ pnpm check-types âœ…
       â”‚   â””â”€ pnpm lint âœ…
       â”‚
       â”œâ”€ Test (quando implementado)
       â”‚   â”œâ”€ Unit tests
       â”‚   â””â”€ E2E tests
       â”‚
       â”œâ”€ Build
       â”‚   â””â”€ pnpm build
       â”‚
       â””â”€ Deploy
           â”œâ”€ Preview (PRs)
           â””â”€ Production (main)
```

## ğŸ“Š Performance Optimization Flow

```
Developer writes code
         â”‚
         â–¼
Turbo detects changes
         â”‚
         â”œâ”€ Uses cache (if available)
         â”‚     â””â”€ Instant âš¡
         â”‚
         â””â”€ Runs task
               â”‚
               â”œâ”€ Generates cache
               â”‚     â””â”€ Next run faster
               â”‚
               â””â”€ Output ready
```

## ğŸ›¡ï¸ Type Safety Guarantee

```
Write Code
    â”‚
    â”œâ”€ TypeScript Compiler
    â”‚   â”œâ”€ Strict mode âœ…
    â”‚   â”œâ”€ No any âœ…
    â”‚   â””â”€ Null checks âœ…
    â”‚
    â”œâ”€ ESLint
    â”‚   â”œâ”€ Import order âœ…
    â”‚   â”œâ”€ React rules âœ…
    â”‚   â””â”€ Accessibility âœ…
    â”‚
    â”œâ”€ Prettier
    â”‚   â””â”€ Consistent format âœ…
    â”‚
    â””â”€ Zod (Runtime)
        â””â”€ API validation âœ…
              â”‚
              â–¼
      Production-ready code ğŸš€
```

---

## ğŸ“– Legend

- `â”Œâ”€â”` - Container/boundary
- `â”‚ â”œ â””` - Hierarchy/flow
- `â†’ â–¼` - Direction of flow
- `âœ…` - Validated/checked
- `âš¡` - Fast/optimized
- `ğŸš€` - Ready for production

---

**Esta arquitetura garante:**

âœ… Type safety em toda a aplicaÃ§Ã£o  
âœ… Performance otimizada  
âœ… Manutenibilidade a longo prazo  
âœ… Escalabilidade horizontal  
âœ… Developer experience excelente  


